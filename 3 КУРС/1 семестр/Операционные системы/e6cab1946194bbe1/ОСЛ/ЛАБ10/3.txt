#include <stdio.h>
#include <unistd.h>
#include <errno.h>
#define _GNU_SOURCE
#include <sched.h>
size_t CPU_SETSIZE;

int main()
{
int ret, i;
cpu_set_t set;
CPU_ZERO(&set);
ret = sched_getaffinity (0, sizeof (cpu_set_t), &set);
if (ret == -1) 
perror ("sched_getaffinity");
for (i = 0; i <CPU_SETSIZE; i++) { 	
int cpu; 
cpu = CPU_ISSET(i, &set); 
printf ("cpu=%i is %s\n", i, cpu ? "set" : "unset");
}
return 0;
}